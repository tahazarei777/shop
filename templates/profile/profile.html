{% load static %}
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>پروفایل کاربر</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        body { font-family: 'Vazirmatn', sans-serif; background: linear-gradient(135deg, #EDE9FE 0%, #C7D2FE 100%); margin: 0; display: flex; justify-content: center; align-items: center; height: 100vh; }
        .btn:hover{transform: scale(1.05);animation: 0.5 all ease;}
        .profile-card { background: #fff; width: 95%; max-width: 450px; padding: 2rem 1.5rem; border-radius: 2rem; box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align: center; position: relative; overflow: hidden; }
        .profile-card h2 { color:#4F46E5; position:relative; z-index:1; }
        .profile-info { text-align: right; position: relative; z-index:1; }
        .profile-info p { margin: 0.6rem 0; }
        .profile-actions { margin-top: 2rem; display:flex; flex-direction:column; gap:1rem; position: relative; z-index:1; }
        .logout-button, .edit-button { display:inline-block; padding:0.8rem 1.5rem; border-radius:0.75rem; text-decoration:none; font-weight:600; text-align:center; transition:background 0.3s, transform 0.2s; }
        .logout-button { background:#EF4444; color:#fff; }
        .logout-button:hover { background:#DC2626; transform: scale(1.05); }
        .edit-button { background:#4F46E5; color:#fff; }
        .edit-button:hover { background:#4338CA; transform: scale(1.05); }
        .edit-form { display:none; margin-top:1.5rem; text-align:right; }
        .edit-form input { width:100%; padding:0.6rem 0.8rem; margin-bottom:0.8rem; border-radius:0.6rem; border:1px solid #D1D5DB; font-size:1rem; }
        .edit-form input:focus { outline:none; border-color:#4F46E5; box-shadow:0 0 0 0.25rem rgba(99,102,241,0.2); }
        .edit-form button { width:100%; padding:0.8rem; border:none; border-radius:0.75rem; background:#10B981; color:#fff; font-weight:600; cursor:pointer; transition:background 0.3s, transform 0.2s; }
        .edit-form button:hover { background:#059669; transform:scale(1.03); }
    </style>
</head>
<body>
    <div class="profile-card">
        <h2><i data-feather="user"></i> پروفایل شما</h2>
        <p class="description">اطلاعات حساب کاربری شما</p>

        <div class="profile-info">
            <p><strong>نام کاربری:</strong> {{ user.username }}</p>
            <p><strong>نام:</strong> {{ user.first_name }}</p>
            <p><strong>نام خانوادگی:</strong> {{ user.last_name }}</p>
            <p><strong>شماره تلفن:</strong> {{ user.profile.phone_number }}</p>
            <p><strong>رمز عبور:</strong> *******</p>
        </div>

        <div class="profile-actions">
            <a href="{% url 'shop_dashboard' %}"class="btn btn-info btn-lg"> مشاهده مشتریان</a>
            <a href="{% url 'logout' %}" class="btn btn-danger btn-lg">خروج از حساب</a>
            <button class="btn btn-primary btn-lg" onclick="toggleEdit()">ویرایش پروفایل</button>
        </div>

        <div class="edit-form" id="editForm">
            <form method="POST" action="">
                {% csrf_token %}
                <input type="text" name="first_name" placeholder="نام" value="{{ form.initial.first_name|default_if_none:'' }}">
                <input type="text" name="last_name" placeholder="نام خانوادگی" value="{{ form.initial.last_name|default_if_none:'' }}">
                <input type="text" name="phone_number" placeholder="شماره تلفن" value="{{ form.phone_number.value|default_if_none:'' }}">
                <input type="password" name="password" placeholder="رمز عبور جدید">
                <button type="submit" class="btn btn-success btn-lg">ذخیره تغییرات</button>
            </form>
        </div>
    </div>

    <script>
        feather.replace();
        function toggleEdit() {
            const form = document.getElementById('editForm');
            form.style.display = form.style.display === 'block' ? 'none' : 'block';
        }
    </script>
</body>
</html>
